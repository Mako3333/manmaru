# 実装ステップ

## 1. 現在の実装状況（2025年3月3日時点）

### 完了した実装
1. **データベース構築**
   - Supabaseでの各種テーブル作成
   - RLSポリシーの設定
   - インデックス最適化

2. **型定義の整理**
   - BasicNutritionDataインターフェース新設
   - 型の重複解消と一貫性向上
   - データ構造の最適化

3. **食事記録機能**
   - 写真アップロード機能
   - Gemini APIによる画像解析
   - 食品リスト編集画面
   - 食事データ保存機能

4. **APIエンドポイント**
   - 食事データ管理API
   - 特定日付の食事データ取得
   - 日付範囲の食事データ取得
   - 栄養素サマリー取得

### 実装中の機能
1. **UI/UX改善**
   - プロフィール登録画面の強化
   - 入力フォームのUX改善
   - 食事制限選択の日本語化

2. **栄養管理ダッシュボード**
   - 栄養バランス可視化チャート
   - 目標達成度プログレスバー
   - 週間・月間レポート

### 未実装の機能
1. **AIアドバイザー機能**
   - daily_nutrition_adviceテーブルの作成（作成済み）
   - AIアドバイス生成API
   - アドバイス表示コンポーネント
   - アドバイスの種類：
     - 日次栄養アドバイス
     - 食事ごとのアドバイス
     - 妊娠週数に応じたアドバイス

2. **献立提案機能**
   - 不足栄養素の特定ロジック
   - レシピ提案アルゴリズム
   - レシピ表示UI

## 2. 今後の実装計画

### Week 1: AIアドバイザー機能の実装

1. **AI機能実装**
   - Gemini APIとの連携強化
   - アドバイス生成ロジックの実装
   - レスポンスパーサーの作成

2. **フロントエンド実装**
   - AIアドバイスコンポーネント(home画面の本日の栄養アドバイスコンポーネントと連携)
   - ユーザーインタラクション

### Week 2: 献立提案機能の実装
1. **APIエンドポイント**
   - レシピ提案API
   - 栄養バランス計算ロジック

2. **フロントエンド**
   - レシピ一覧表示
   - レシピ詳細表示
   - 栄養情報表示

### Week 3: 統合とテスト
1. **エンドツーエンドテスト**
   - 食事記録→栄養分析→レシピ提案フロー
   - データ同期の確認

2. **パフォーマンス最適化**
   - API応答速度の改善
   - クエリ最適化

3. **エラーハンドリング強化**
   - エッジケース対応
   - ユーザーフィードバック改善

## 3. デプロイ戦略

### 開発環境
- Next.js：ローカル開発
- Supabase：無料プラン
- Gemini API：開発用APIキー

### 本番環境
- Next.js：Vercelでデプロイ
- Supabase：無料プラン（初期段階）
- Gemini API：本番用APIキー

## 4. テスト戦略

### ユニットテスト
- 栄養計算ロジック
- データ変換処理
- API応答処理

### 統合テスト
- データベース操作
- API連携
- 認証フロー

### E2Eテスト
- ユーザー登録から食事記録まで
- 栄養管理ダッシュボード操作
- エラー処理の確認

## 5. 監視と改善計画

### パフォーマンスモニタリング
- API応答時間
- データベースクエリ速度
- 画像処理時間

### ユーザーフィードバック
- エラー報告の収集
- 機能改善要望の管理
- 使用状況の分析