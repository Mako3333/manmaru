
## 移行状況の分類

### 移行が完了したもの

1. **APIエンドポイント（v2）**:
   - ✅ `/api/v2/food/parse` - テキスト食品入力解析API
   - ✅ `/api/v2/image/analyze` - 食事画像解析API
   - ✅ `/api/v2/recipe/parse` - レシピURL解析API

2. **APIアクセス用ユーティリティ関数**:
   - ✅ `analyzeTextInput()` - テキスト解析関数
   - ✅ `analyzeMealPhoto()` - 画像解析関数（既存関数を更新）
   - ✅ `analyzeRecipeUrl()` - レシピURL解析関数

3. **フロントエンドの一部**:
   - ✅ `recipe-clip-client.tsx` - レシピURL解析ページ（新APIを使用するよう更新）

### まだ移行が終わっていないもの

1. **クライアントコンポーネント**:
   - ❌ `meals/log/page.tsx` - 食事記録ページ（まだ古いAPIを使用）
   - ❌ その他のUI関連コンポーネント（古いAPI呼び出しコードが残っている）

2. **古いAPIエンドポイント**:
   - ❌ `/api/analyze-text-input/` - 古いテキスト解析APIの削除
   - ❌ `/api/analyze-image/` - 古い画像解析APIの削除
   - ❌ `/api/recipes/parse-url/` - 古いレシピURL解析APIの削除
   - ❌ `/api/recipes/parse-social-url/` - 古いソーシャルURLの解析APIの削除

3. **旧コードの整理**:
   - ❌ 古い食品マッチングロジックの削除
   - ❌ 旧栄養計算クラスの削除
   - ❌ 冗長な食品量解析ロジックの削除

4. **全体的な対応**:
   - ❌ 統一エラーハンドリングの全APIへの適用
   - ❌ ドキュメントの更新
   - ❌ 新システムのテスト

現状は並行運用フェーズで、新しいAPIは実装されましたが、古いAPIも残っています。次のステップとしては、残りのクライアントコードを新APIを使うように更新し、十分なテスト後に古いAPIとコードを削除する作業が必要です。
